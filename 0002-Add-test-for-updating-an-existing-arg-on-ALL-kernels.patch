From 869431688cb1de86411fb89f8ff957bf16c57dd9 Mon Sep 17 00:00:00 2001
From: "Brian C. Lane" <bcl@redhat.com>
Date: Mon, 18 Apr 2011 13:26:33 -0700
Subject: [PATCH 2/2] Add test for updating an existing arg on ALL kernels
 (#696971)

Resolves: rhbz#696971
---
 test.sh                   |    2 ++
 test/results/updargs/g7.5 |   30 ++++++++++++++++++++++++++++++
 2 files changed, 32 insertions(+), 0 deletions(-)
 create mode 100644 test/results/updargs/g7.5

diff --git a/test.sh b/test.sh
index eee3ae4..e9d3e3a 100755
--- a/test.sh
+++ b/test.sh
@@ -237,6 +237,8 @@ grubTest grub.7 updargs/g7.3 --boot-filesystem=/    \
 grubTest grub.7 updargs/g7.4 --boot-filesystem=/    \
     --update-kernel=/vmlinuz-2.4.7-2 \
     --args "ro root=LABEL=/ console=tty0 console=ttyS1,9600n81 single"
+grubTest grub.7 updargs/g7.5 --boot-filesystem=/    \
+    --update-kernel=ALL --args "root=/dev/hda2"
 grubTest grub.11 updargs/g11.1 --boot-filesystem=/    \
     --update-kernel=/vmlinuz-2.4.7-2smp \
     --args "ro root=LABEL=/ console=tty0 console=ttyS1,9600n81 single"
diff --git a/test/results/updargs/g7.5 b/test/results/updargs/g7.5
new file mode 100644
index 0000000..e61c10d
--- /dev/null
+++ b/test/results/updargs/g7.5
@@ -0,0 +1,30 @@
+default=2
+timeout=10
+splashimage=(hd0,5)/boot/grub/splash.xpm.gz
+
+title Red Hat Linux (2.4.7-2.9)
+	root (hd0,5)
+	kernel /boot/vmlinuz-2.4.7-2.5 ro root=/dev/hda2
+	initrd /boot/initrd-2.4.7-2.5.img
+
+title Red Hat Linux (2.4.7-2.5)
+	root (hd0,5)
+	kernel /boot/vmlinuz-2.4.7-2.5 ro root=/dev/hda2
+	initrd /boot/initrd-2.4.7-2.5.img
+
+title Red Hat Linux (2.4.7-ac3)
+	root (hd0,5)
+	kernel /boot/vmlinuz-2.4.7-ac3 ro root=/dev/hda2
+	initrd /boot/initrd-2.4.7-ac3.img
+
+title Red Hat Linux (2.4.7-2)
+	root (hd0,0)
+	kernel /vmlinuz-2.4.7-2 ro root=/dev/hda2 console=tty0 console=ttyS1,9600n81
+	initrd /initrd-2.4.7-2.img
+
+title dos
+	root (hd0,0)
+	chainloader +1
+ 
+
+
-- 
1.7.7.6

